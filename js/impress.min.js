/**
 * impress.js
 * Copyright 2011-2012 Bartek Szopka (@bartaz)
 * Released under the MIT and GPL Licenses.
 *
 *  author:  Bartek Szopka
 *  version: 0.5.3
 *  url:     http://bartaz.github.com/impress.js/
 *  source:  http://github.com/mrhein/impress.js/
 */
(function(f,k){var n=function(){var l=f.createElement("dummy").style,a=["Webkit","Moz","O","ms","Khtml"],c={};return function(g){if("undefined"===typeof c[g]){var e=g.charAt(0).toUpperCase()+g.substr(1),e=(g+" "+a.join(e+" ")+e).split(" ");c[g]=null;for(var b in e)if(void 0!==l[e[b]]){c[g]=e[b];break}}return c[g]}}(),p=function(l,a){var c,g;for(c in a)a.hasOwnProperty(c)&&(g=n(c),null!==g&&(l.style[g]=a[c]));return l},b=function(l,a){return isNaN(l)?a||0:Number(l)},a=function(a){return f.getElementById(a)},
h=function(a,b){b=b||f;return b.querySelector(a)},I=function(a,b){b=b||f;var c=b.querySelectorAll(a);return[].slice.call(c)},A=function(a,b,c){var g=f.createEvent("CustomEvent");g.initCustomEvent(b,!0,!0,c);a.dispatchEvent(g)},E=function(a){return" translate3d("+a.x+"px,"+a.y+"px,"+a.z+"px) "},F=function(a,b){var c=" rotateX("+a.x+"deg) ",g=" rotateY("+a.y+"deg) ",e=" rotateZ("+a.z+"deg) ";return b?e+g+c:c+g+e},G=function(a){var b=k.innerHeight/a.height,c=k.innerWidth/a.width,b=b>c?c:b;a.maxScale&&
b>a.maxScale&&(b=a.maxScale);a.minScale&&b<a.minScale&&(b=a.minScale);return b},q=f.body,B=navigator.userAgent.toLowerCase(),C=null!==n("perspective")&&q.classList&&q.dataset&&-1===B.search(/(iphone)|(ipod)|(android)/);C?(q.classList.remove("impress-not-supported"),q.classList.add("impress-supported")):q.className+=" impress-not-supported ";var w={},x=function(){return!1};(k.impress=function(l){if(!C)return{init:x,goingto:x,prev:x,next:x};l=l||"impress";if(w["impress-root-"+l])return w["impress-root-"+
l];var n={},c=null,g=null,e=null,t=null,u=null,m=a(l),y=f.createElement("div"),D=!1,z=null,B=function(a,c){var d=a.dataset,d={translate:{x:b(d.x),y:b(d.y),z:b(d.z)},rotate:{x:b(d.rotateX),y:b(d.rotateY),z:b(d.rotateZ||d.rotate)},scale:b(d.scale,1),el:a};a.id||(a.id="step-"+(c+1));n["impress-"+a.id]=d;p(a,{position:"absolute",transform:"translate(-50%,-50%)"+E(d.translate)+F(d.rotate)+(" scale("+d.scale+") "),transformStyle:"preserve-3d"})},J=function(r){"number"===typeof r?r=0>r?e[e.length+r]:e[r]:
"string"===typeof r&&(r=a(r));return r&&r.id&&n["impress-"+r.id]?r:null},H=null,v=function(a,e){if(!D||!(a=J(a)))return!1;k.scrollTo(0,0);var d=n["impress-"+a.id];c&&(c.classList.remove("active"),q.classList.remove("impress-on-"+c.id));a.classList.add("active");q.classList.add("impress-on-"+a.id);var d={rotate:{x:-d.rotate.x,y:-d.rotate.y,z:-d.rotate.z},translate:{x:-d.translate.x,y:-d.translate.y,z:-d.translate.z},scale:1/d.scale},f=d.scale>=g.scale;e=b(e,t.transitionDuration);var h=e/2;a===c&&(u=
G(t));var l=d.scale*u;c&&c!==a&&z===c&&(A(c,"impress:stepleave"),z=null);p(m,{transform:" perspective("+t.perspective/l+"px) "+(" scale("+l+") "),transitionDuration:e+"ms",transitionDelay:(f?h:0)+"ms"});p(y,{transform:F(d.rotate,!0)+E(d.translate),transitionDuration:e+"ms",transitionDelay:(f?0:h)+"ms"});if(g.scale===d.scale||g.rotate.x===d.rotate.x&&g.rotate.y===d.rotate.y&&g.rotate.z===d.rotate.z&&g.translate.x===d.translate.x&&g.translate.y===d.translate.y&&g.translate.z===d.translate.z)h=0;g=d;
c=a;k.clearTimeout(H);H=k.setTimeout(function(){var a=c;z!==a&&(A(a,"impress:stepenter"),z=a)},e+h);return a};m.addEventListener("impress:init",function(){e.forEach(function(a){a.classList.add("future")});m.addEventListener("impress:stepenter",function(a){a.target.classList.remove("past");a.target.classList.remove("future");a.target.classList.add("present")},!1);m.addEventListener("impress:stepleave",function(a){a.target.classList.remove("present");a.target.classList.add("past")},!1)},!1);m.addEventListener("impress:init",
function(){var b="";m.addEventListener("impress:stepenter",function(a){k.location.hash=b="#/"+a.target.id},!1);k.addEventListener("hashchange",function(){k.location.hash!==b&&v(a(k.location.hash.replace(/^#\/?/,"")))},!1);v(a(k.location.hash.replace(/^#\/?/,""))||e[0],0)},!1);q.classList.add("impress-disabled");return w["impress-root-"+l]={init:function(){if(!D){var a=h("meta[name='viewport']")||f.createElement("meta");a.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no";
a.parentNode!==f.head&&(a.name="viewport",f.head.appendChild(a));a=m.dataset;t={width:b(a.width,1024),height:b(a.height,768),maxScale:b(a.maxScale,1),minScale:b(a.minScale,0),perspective:b(a.perspective,1E3),transitionDuration:b(a.transitionDuration,1E3)};u=G(t);[].slice.call(m.childNodes).forEach(function(a){y.appendChild(a)});m.appendChild(y);f.documentElement.style.height="100%";p(q,{height:"100%",overflow:"hidden"});a={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-in-out",
transformStyle:"preserve-3d"};p(m,a);p(m,{top:"50%",left:"50%",transform:" perspective("+t.perspective/u+"px) "+(" scale("+u+") ")});p(y,a);q.classList.remove("impress-disabled");q.classList.add("impress-enabled");e=I(".step",m);e.forEach(B);g={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1};D=!0;A(m,"impress:init",{api:w["impress-root-"+l]})}},goingto:v,next:function(){var a=e.indexOf(c)+1,a=a<e.length?e[a]:e[0];return v(a)},prev:function(){var a=e.indexOf(c)-1,a=0<=a?e[a]:e[e.length-1];return v(a)}}}).supported=
C})(document,window);
(function(f,k){var n=function(f,b){var a=null;return function(){var h=this,k=arguments;clearTimeout(a);a=setTimeout(function(){f.apply(h,k)},b)}};f.addEventListener("impress:init",function(p){var b=p.detail.api;f.addEventListener("keydown",function(a){(9===a.keyCode||32<=a.keyCode&&34>=a.keyCode||37<=a.keyCode&&40>=a.keyCode)&&a.preventDefault()},!1);f.addEventListener("keyup",function(a){if(9===a.keyCode||32<=a.keyCode&&34>=a.keyCode||37<=a.keyCode&&40>=a.keyCode){switch(a.keyCode){case 33:case 37:case 38:b.prev();break;
case 9:case 32:case 34:case 39:case 40:b.next()}a.preventDefault()}},!1);f.addEventListener("click",function(a){for(var h=a.target;"A"!==h.tagName&&h!==f.documentElement;)h=h.parentNode;if("A"===h.tagName){var k=h.getAttribute("href");k&&"#"===k[0]&&(h=f.getElementById(k.slice(1)))}b.goingto(h)&&(a.stopImmediatePropagation(),a.preventDefault())},!1);f.addEventListener("click",function(a){for(var h=a.target;(!h.classList.contains("step")||h.classList.contains("active"))&&h!==f.documentElement;)h=h.parentNode;
b.goingto(h)&&a.preventDefault()},!1);f.addEventListener("touchstart",function(a){if(1===a.touches.length){var f=a.touches[0].clientX,p=.3*k.innerWidth,n=null;f<p?n=b.prev():f>k.innerWidth-p&&(n=b.next());n&&a.preventDefault()}},!1);k.addEventListener("resize",n(function(){b.goingto(f.querySelector(".step.active"),500)},250),!1)},!1)})(document,window);
